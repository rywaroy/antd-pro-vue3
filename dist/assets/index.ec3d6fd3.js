import{b as F,F as K,r as n,o as k,c as Y,w as a,d as t,m as M,u as o,e as d,t as W,f as C,g as X,h as Z,i as ee,a as f,j as z,k as O,l as B,n as te,p as $,D as ae,U as oe}from"./index.584187fa.js";const ne=d("0"),le=d("1"),se=d("2"),ie={__name:"UpdateFormModal",props:{title:String,visible:Boolean,formState:Object},emits:["update:visible"],setup(c,{emit:D}){const{formState:i}=c,m={span:4},U={span:14},P=F({no:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u7F16\u53F7"}],status:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]}),{resetFields:I,validate:v,validateInfos:g}=K.useForm(i,P),S=()=>{D("update:visible",!1)},b=()=>{v().then(()=>{console.log(W(i))}).catch(u=>{console.log("error",u)})};return(u,_)=>{const p=n("a-input"),w=n("a-form-item"),h=n("a-select-option"),l=n("a-select"),e=n("a-form"),y=n("a-modal");return k(),Y(y,{title:c.title,visible:c.visible,onCancel:S,onOk:b},{default:a(()=>[t(e,{"label-col":m,"wrapper-col":U},{default:a(()=>[t(w,M({label:"\u89C4\u5219\u7F16\u53F7"},o(g).no),{default:a(()=>[t(p,{value:c.formState.no,"onUpdate:value":_[0]||(_[0]=r=>c.formState.no=r)},null,8,["value"])]),_:1},16),t(w,M({label:"\u72B6\u6001"},o(g).status),{default:a(()=>[t(l,{value:c.formState.status,"onUpdate:value":_[1]||(_[1]=r=>c.formState.status=r)},{default:a(()=>[t(h,{value:0},{default:a(()=>[ne]),_:1}),t(h,{value:1},{default:a(()=>[le]),_:1}),t(h,{value:2},{default:a(()=>[se]),_:1})]),_:1},8,["value"])]),_:1},16)]),_:1})]),_:1},8,["title","visible"])}}};function ue(c,D={}){const{defaultQueryParam:i={},formatQueryParam:m=e=>e,formatReturnData:U=e=>e.data,params:P=C({}),manual:I=!1}=D,v=C({...i}),g=C(!1),S=C([]),b=C(!1),u=F({hideOnSinglePage:!0,pageSize:10,total:0,current:1}),_=()=>{g.value=!g.value},p=()=>{b.value=!0,c(m({...v.value,current:u.current,pageSize:u.pageSize,...P.value})).then(e=>{const{list:y,total:r}=U(e);S.value=y,u.total=r,b.value=!1}).catch(()=>{b.value=!1})},w=()=>{u.current=1,p()},h=()=>{v.value={...i},u.current=1,p()},l=e=>{u.current=e.current,u.pageSize=e.pageSize,p()};return X(()=>{I||p()}),{queryParam:v,advanced:g,dataSource:S,pagination:u,loading:b,toggleAdvanced:_,search:w,reset:h,getDataList:p,handleTableChange:l}}const re={class:"table-page-search-wrapper"},de=d("\u5168\u90E8"),ce=d("\u5173\u95ED"),_e=d("\u8FD0\u884C\u4E2D"),me=d("\u67E5\u8BE2"),pe=d("\u91CD\u7F6E"),fe={class:"table-page-wrapper"},ve={class:"table-page-toolbar"},ge=f("div",{class:"table-title"},"\u67E5\u8BE2\u8868\u683C",-1),be={class:"table-operation"},he=d("\u65B0\u5EFA"),ye={key:1},ke=["onClick"],Ce=f("a",null,"\u8BA2\u9605\u62A5\u8B66",-1),Se=Z({name:"TableList"}),De=Object.assign(Se,{setup(c){const D=C({}),{queryParam:i,advanced:m,dataSource:U,pagination:P,loading:I,toggleAdvanced:v,search:g,reset:S,handleTableChange:b}=ue(ee,{defaultQueryParam:{status:"0",useStatus:"0"},params:D,formatQueryParam(l){const{rangeDate:e}=l;return e&&e.length>0&&(l.startTime=e[0].format("YYYY-MM-DD"),l.endTime=e[1].format("YYYY-MM-DD"),delete l.rangeDate),l}}),u=C(!1),_=F({no:"",status:""}),p=l=>{const{no:e,status:y}=l;_.no=e,_.status=y,u.value=!0},w=[{title:"#",key:"serial"},{title:"\u89C4\u5219\u7F16\u53F7",dataIndex:"no"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo"},{title:"\u72B6\u6001",dataIndex:"status"},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updatedAt"},{title:"\u64CD\u4F5C",dataIndex:"action",width:"150px"}],h={onChange:(l,e)=>{console.log(l),console.log(e)},getCheckboxProps:l=>({disabled:l.id===2,name:l.name})};return(l,e)=>{const y=n("a-input"),r=n("a-form-item"),x=n("a-col"),N=n("a-select-option"),q=n("a-select"),A=n("a-input-number"),Q=n("a-date-picker"),V=n("a-range-picker"),T=n("a-button"),j=n("a-row"),L=n("a-form"),R=n("a-divider"),E=n("a-table"),G=n("page-container");return k(),Y(G,null,{default:a(()=>[f("div",re,[t(L,{layout:"inline"},{default:a(()=>[t(j,{gutter:48},{default:a(()=>[t(x,{md:8,sm:24},{default:a(()=>[t(r,{label:"\u89C4\u5219\u7F16\u53F7"},{default:a(()=>[t(y,{value:o(i).id,"onUpdate:value":e[0]||(e[0]=s=>o(i).id=s),placeholder:""},null,8,["value"])]),_:1})]),_:1}),t(x,{md:8,sm:24},{default:a(()=>[t(r,{label:"\u4F7F\u7528\u72B6\u6001"},{default:a(()=>[t(q,{value:o(i).status,"onUpdate:value":e[1]||(e[1]=s=>o(i).status=s),placeholder:"\u8BF7\u9009\u62E9"},{default:a(()=>[t(N,{value:"0"},{default:a(()=>[de]),_:1}),t(N,{value:"1"},{default:a(()=>[ce]),_:1}),t(N,{value:"2"},{default:a(()=>[_e]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),o(m)?(k(),z(O,{key:0},[t(x,{md:8,sm:24},{default:a(()=>[t(r,{label:"\u8C03\u7528\u6B21\u6570"},{default:a(()=>[t(A,{value:o(i).callNo,"onUpdate:value":e[2]||(e[2]=s=>o(i).callNo=s),style:{width:"100%"}},null,8,["value"])]),_:1})]),_:1}),t(x,{md:8,sm:24},{default:a(()=>[t(r,{label:"\u66F4\u65B0\u65E5\u671F"},{default:a(()=>[t(Q,{value:o(i).date,"onUpdate:value":e[3]||(e[3]=s=>o(i).date=s),style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u66F4\u65B0\u65E5\u671F"},null,8,["value"])]),_:1})]),_:1}),t(x,{md:8,sm:24},{default:a(()=>[t(r,{label:"\u65F6\u95F4\u533A\u95F4"},{default:a(()=>[t(V,{value:o(i).rangeDate,"onUpdate:value":e[4]||(e[4]=s=>o(i).rangeDate=s)},null,8,["value"])]),_:1})]),_:1})],64)):B("",!0),t(x,{md:!o(m)&&8||24,sm:24},{default:a(()=>[f("span",{class:"table-page-search-submitButtons",style:te(o(m)&&{float:"right",overflow:"hidden"}||{})},[t(T,{type:"primary",onClick:o(g)},{default:a(()=>[me]),_:1},8,["onClick"]),t(T,{style:{"margin-left":"8px"},onClick:o(S)},{default:a(()=>[pe]),_:1},8,["onClick"]),f("a",{style:{"margin-left":"8px"},onClick:e[5]||(e[5]=(...s)=>o(v)&&o(v)(...s))},[d($(o(m)?" \u6536\u8D77 ":" \u5C55\u5F00 ")+" ",1),o(m)?(k(),Y(o(ae),{key:0})):(k(),Y(o(oe),{key:1}))])],4)]),_:1},8,["md"])]),_:1})]),_:1})]),f("div",fe,[f("div",ve,[ge,f("div",be,[t(T,{type:"primary",onClick:e[6]||(e[6]=s=>u.value=!0)},{default:a(()=>[he]),_:1})])]),t(E,{"row-key":"id",loading:o(I),"data-source":o(U),columns:w,pagination:o(P),"row-selection":h,onChange:o(b)},{bodyCell:a(({column:s,record:H,index:J})=>[s.key==="serial"?(k(),z(O,{key:0},[d($(J+1),1)],64)):B("",!0),s.dataIndex==="action"?(k(),z("span",ye,[f("a",{onClick:we=>p(H)},"\u914D\u7F6E",8,ke),t(R,{type:"vertical"}),Ce])):B("",!0)]),_:1},8,["loading","data-source","pagination","onChange"])]),t(ie,{visible:u.value,"onUpdate:visible":e[7]||(e[7]=s=>u.value=s),title:"\u65B0\u5EFA\u89C4\u5219","form-state":_},null,8,["visible","form-state"])]),_:1})}}});export{De as default};
