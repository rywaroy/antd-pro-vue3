import{d as Y,F as O,r,a as I,c as M,w as s,e as o,m as T,u,f as D,t as Q,g as m,o as U,h as V,b as h,i as q,j,k as $,l as F}from"./index-1188125c.js";const E={__name:"UpdateFormModal",props:{title:String,visible:Boolean,formState:Object},emits:["update:visible"],setup(i,{emit:y}){const{formState:p}=i,S={span:4},w={span:14},C=Y({no:[{required:!0,message:"请输入规则编号"}],status:[{required:!0,message:"请选择状态"}]}),{resetFields:P,validate:v,validateInfos:_}=O.useForm(p,C),g=()=>{y("update:visible",!1)},d=()=>{v().then(()=>{console.log(Q(p))}).catch(a=>{console.log("error",a)})};return(a,n)=>{const l=r("a-input"),b=r("a-form-item"),f=r("a-select-option"),x=r("a-select"),e=r("a-form"),t=r("a-modal");return I(),M(t,{title:i.title,visible:i.visible,onCancel:g,onOk:d},{default:s(()=>[o(e,{"label-col":S,"wrapper-col":w},{default:s(()=>[o(b,T({label:"规则编号"},u(_).no),{default:s(()=>[o(l,{value:i.formState.no,"onUpdate:value":n[0]||(n[0]=c=>i.formState.no=c)},null,8,["value"])]),_:1},16),o(b,T({label:"状态"},u(_).status),{default:s(()=>[o(x,{value:i.formState.status,"onUpdate:value":n[1]||(n[1]=c=>i.formState.status=c)},{default:s(()=>[o(f,{value:0},{default:s(()=>[D("0")]),_:1}),o(f,{value:1},{default:s(()=>[D("1")]),_:1}),o(f,{value:2},{default:s(()=>[D("2")]),_:1})]),_:1},8,["value"])]),_:1},16)]),_:1})]),_:1},8,["title","visible"])}}};function G(i,y={}){const{defaultQueryParam:p={},formatQueryParam:S=e=>e,formatReturnData:w=e=>e.data,params:C=m({}),manual:P=!1}=y,v=m({...p}),_=m(!1),g=m([]),d=m(!1),a=Y({hideOnSinglePage:!0,pageSize:10,total:0,current:1}),n=()=>{_.value=!_.value},l=()=>{d.value=!0,i(S({...v.value,current:a.current,pageSize:a.pageSize,...C.value})).then(e=>{const{list:t,total:c}=w(e);g.value=t,a.total=c,d.value=!1}).catch(()=>{d.value=!1})},b=()=>{a.current=1,l()},f=()=>{v.value={...p},a.current=1,l()},x=e=>{a.current=e.current,a.pageSize=e.pageSize,l()};return U(()=>{P||l()}),{queryParam:v,advanced:_,dataSource:g,pagination:a,loading:d,toggleAdvanced:n,search:b,reset:f,getDataList:l,handleTableChange:x}}const H={class:"table-page-wrapper"},J={class:"table-page-toolbar"},K=h("div",{class:"table-title"},"查询表格",-1),W={class:"table-operation"},X={key:1},Z=["onClick"],ee=h("a",null,"订阅报警",-1),oe=Object.assign({name:"TableList"},{__name:"index",setup(i){const y=m({}),p=m([{type:"input",label:"规则编号",value:"id"},{type:"select",label:"使用状态",value:"status",options:[{label:"全部",value:"0"},{label:"关闭",value:"1"},{label:"运行中",value:"2"}]},{type:"input-number",label:"调用次数",value:"callNo"},{type:"date",label:"更新日期",value:"date"},{type:"range-date",label:"时间区间",value:"rangeDate"}]),{queryParam:S,advanced:w,dataSource:C,pagination:P,loading:v,toggleAdvanced:_,search:g,reset:d,handleTableChange:a}=G(V,{defaultQueryParam:{status:"0",useStatus:"0"},params:y,formatQueryParam(e){const{rangeDate:t}=e;return t&&t.length>0&&(e.startTime=t[0].format("YYYY-MM-DD"),e.endTime=t[1].format("YYYY-MM-DD"),delete e.rangeDate),e}}),n=m(!1),l=Y({no:"",status:""}),b=e=>{const{no:t,status:c}=e;l.no=t,l.status=c,n.value=!0},f=[{title:"#",key:"serial"},{title:"规则编号",dataIndex:"no"},{title:"描述",dataIndex:"description"},{title:"服务调用次数",dataIndex:"callNo"},{title:"状态",dataIndex:"status"},{title:"更新时间",dataIndex:"updatedAt"},{title:"操作",dataIndex:"action",width:"150px"}],x={onChange:(e,t)=>{console.log(e),console.log(t)},getCheckboxProps:e=>({disabled:e.id===2,name:e.name})};return(e,t)=>{const c=r("base-search-form"),N=r("a-button"),z=r("a-divider"),B=r("a-table"),R=r("page-container");return I(),M(R,null,{default:s(()=>[o(c,{"form-list":p.value,"query-param":u(S),onReset:u(d),onSearch:u(g)},null,8,["form-list","query-param","onReset","onSearch"]),h("div",H,[h("div",J,[K,h("div",W,[o(N,{type:"primary",onClick:t[0]||(t[0]=k=>n.value=!0)},{default:s(()=>[D("新建")]),_:1})])]),o(B,{"row-key":"id",loading:u(v),"data-source":u(C),columns:f,pagination:u(P),"row-selection":x,onChange:u(a)},{bodyCell:s(({column:k,record:A,index:L})=>[k.key==="serial"?(I(),q($,{key:0},[D(j(L+1),1)],64)):F("",!0),k.dataIndex==="action"?(I(),q("span",X,[h("a",{onClick:te=>b(A)},"配置",8,Z),o(z,{type:"vertical"}),ee])):F("",!0)]),_:1},8,["loading","data-source","pagination","onChange"])]),o(E,{visible:n.value,"onUpdate:visible":t[1]||(t[1]=k=>n.value=k),title:"新建规则","form-state":l},null,8,["visible","form-state"])]),_:1})}}});export{oe as default};
